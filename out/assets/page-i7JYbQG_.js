import{u as w,r as n,j as e}from"./index-CQ0jGMfQ.js";import{B as k}from"./BottomNavigation-Bi7z2HkY.js";import{d as m,g as D,G as x}from"./GlassCard-Drm0HRq5.js";import{E as S}from"./EmotionChart-BRQH462H.js";import{N as h}from"./NeonButton-Cu2Y-Mkf.js";function T(){const r=w(),[b,g]=n.useState([]),[l,f]=n.useState("all"),[j,u]=n.useState(!0),o=[{key:"joy",label:"Радость",color:"#fbbf24",icon:"ri-emotion-happy-line"},{key:"calm",label:"Спокойствие",color:"#06b6d4",icon:"ri-leaf-line"},{key:"energy",label:"Энергия",color:"#f97316",icon:"ri-flashlight-line"},{key:"love",label:"Любовь",color:"#ec4899",icon:"ri-heart-line"},{key:"confidence",label:"Уверенность",color:"#8b5cf6",icon:"ri-shield-check-line"},{key:"gratitude",label:"Благодарность",color:"#10b981",icon:"ri-hand-heart-line"},{key:"anxiety",label:"Тревога",color:"#ef4444",icon:"ri-alarm-warning-line"},{key:"sadness",label:"Грусть",color:"#6b7280",icon:"ri-emotion-sad-line"},{key:"anger",label:"Гнев",color:"#dc2626",icon:"ri-fire-line"},{key:"fear",label:"Страх",color:"#7c3aed",icon:"ri-ghost-line"}];n.useEffect(()=>{y()},[]);const y=async()=>{try{await m.init();const s=D(),i=await m.getEmotionEntriesByTelegramId(s);g(i)}catch(s){console.error("Ошибка загрузки истории эмоций:",s)}finally{u(!1)}},c=b.filter(s=>l==="all"||s.type===l),p=s=>{const i=new Date(s),t=new Date,a=new Date(t);return a.setDate(a.getDate()-1),i.toDateString()===t.toDateString()?"Сегодня":i.toDateString()===a.toDateString()?"Вчера":i.toLocaleDateString("ru-RU",{day:"numeric",month:"long"})},N=s=>new Date(s).toLocaleTimeString("ru-RU",{hour:"2-digit",minute:"2-digit"}),v=s=>o.find(i=>i.key===s)||o[0];return j?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-900 via-black to-gray-800 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-16 h-16 border-4 border-cyan-400 border-t-transparent rounded-full animate-spin mx-auto mb-4"}),e.jsx("p",{className:"text-white/70",children:"Загрузка эмоций..."})]})}):e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-gray-900 via-black to-gray-800 relative overflow-hidden",children:[e.jsxs("div",{className:"absolute inset-0 opacity-20",children:[e.jsx("div",{className:"absolute top-1/4 left-1/4 w-64 h-64 bg-cyan-400/10 rounded-full blur-3xl animate-pulse"}),e.jsx("div",{className:"absolute bottom-1/4 right-1/4 w-96 h-96 bg-purple-500/10 rounded-full blur-3xl animate-pulse delay-1000"})]}),e.jsxs("div",{className:"relative z-10 pb-28",children:[e.jsx("div",{className:"bg-black/40 backdrop-blur-sm border-b border-white/10 px-4 py-4 sticky top-0 z-20",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h1",{className:"text-xl font-semibold text-white",children:"Эмоции"}),e.jsx("button",{onClick:()=>r("/"),className:"w-10 h-10 flex items-center justify-center rounded-full bg-white/10 hover:bg-white/20 transition-colors",children:e.jsx("i",{className:"ri-close-line text-xl text-white"})})]})}),e.jsxs("div",{className:"px-4 py-6 space-y-6",children:[e.jsx(S,{}),e.jsx("div",{className:"flex space-x-2",children:[{key:"all",label:"Все",icon:"ri-calendar-line"},{key:"morning",label:"Утро",icon:"ri-sun-line"},{key:"evening",label:"Вечер",icon:"ri-moon-line"}].map(s=>e.jsxs("button",{onClick:()=>f(s.key),className:`flex items-center space-x-2 px-4 py-2 rounded-full text-sm transition-all duration-300 ${l===s.key?"bg-cyan-400 text-white shadow-lg":"bg-white/10 text-white/70 hover:bg-white/20"}`,style:{boxShadow:l===s.key?"0 0 15px rgba(6, 182, 212, 0.4)":"none"},children:[e.jsx("i",{className:s.icon}),e.jsx("span",{children:s.label})]},s.key))}),c.length>0?e.jsxs("div",{className:"space-y-3",children:[e.jsx("h3",{className:"text-white text-lg font-semibold",children:"История записей"}),c.map((s,i)=>{const t=v(s.emotion);return e.jsx(x,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"w-12 h-12 flex items-center justify-center rounded-full",style:{backgroundColor:t.color+"20",border:`2px solid ${t.color}`,boxShadow:`0 0 15px ${t.color}40`},children:e.jsx("i",{className:`${t.icon} text-xl`,style:{color:t.color}})}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-white font-semibold",children:t.label}),e.jsxs("div",{className:"flex items-center space-x-2 text-sm text-white/60",children:[e.jsx("span",{children:p(s.created_at)}),e.jsx("span",{children:"•"}),e.jsx("span",{children:N(s.created_at)}),e.jsx("span",{children:"•"}),e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx("i",{className:s.type==="morning"?"ri-sun-line":"ri-moon-line"}),e.jsx("span",{children:s.type==="morning"?"Утро":"Вечер"})]})]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"text-white font-bold text-lg",children:[s.level,"/10"]}),e.jsx("div",{className:"flex",children:Array.from({length:5},(a,d)=>e.jsx("i",{className:`ri-star-${d<s.level/2?"fill":"line"} text-sm`,style:{color:t.color}},d))})]})]})},i)})]}):e.jsx(x,{className:"p-8",children:e.jsxs("div",{className:"text-center",children:[e.jsx("i",{className:"ri-emotion-line text-white/40 text-4xl mb-4"}),e.jsx("h3",{className:"text-white text-lg font-semibold mb-2",children:"Нет записей"}),e.jsx("p",{className:"text-white/60 text-sm mb-6",children:l==="all"?"Начните делать ежедневные чек-ины, чтобы отслеживать свои эмоции":`Нет записей за ${l==="morning"?"утро":"вечер"}`}),e.jsxs("div",{className:"flex space-x-3 justify-center",children:[e.jsxs(h,{onClick:()=>r("/checkin/morning"),className:"flex-1 py-3 text-sm",children:[e.jsx("i",{className:"ri-sun-line mr-2"}),"Утренний чек-ин"]}),e.jsxs(h,{onClick:()=>r("/checkin/evening"),className:"flex-1 py-3 text-sm",children:[e.jsx("i",{className:"ri-moon-line mr-2"}),"Вечерний чек-аут"]})]})]})})]})]}),e.jsx(k,{})]})}export{T as default};
//# sourceMappingURL=page-i7JYbQG_.js.map
