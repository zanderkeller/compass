var d=Object.defineProperty;var c=(a,e,t)=>e in a?d(a,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[e]=t;var l=(a,e,t)=>c(a,typeof e!="symbol"?e+"":e,t);import{j as o}from"./index-CQ0jGMfQ.js";class g{constructor(){l(this,"baseUrl","/api/database");l(this,"initialized",!1)}async init(){if(!this.initialized)try{const e=await fetch(`${this.baseUrl}/init`,{method:"POST",headers:{"Content-Type":"application/json"}});if(!e.ok)throw new Error(`Ошибка инициализации базы данных: ${e.statusText}`);const t=await e.json();console.log("База данных инициализирована:",t.message),this.initialized=!0}catch(e){throw console.error("Ошибка инициализации базы данных:",e),e}}async createUser(e){console.log("Создание нового пользователя...");const t=await fetch(`${this.baseUrl}/users`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok)throw new Error(`Ошибка создания пользователя: ${t.statusText}`);const r=await t.json();return console.log(`Пользователь создан с ID: ${r.id}`),r.id}async getUserByTelegramId(e){const t=await fetch(`${this.baseUrl}/users/${e}`);if(t.status===404)return console.log(`Пользователь с Telegram ID ${e}: не найден`),null;if(!t.ok)throw new Error(`Ошибка получения пользователя: ${t.statusText}`);const r=await t.json();return console.log(`Поиск пользователя с Telegram ID ${e}: найден`),r}async createClientProfile(e){const t={...e,selected_widgets:Array.isArray(e.selected_widgets)?JSON.stringify(e.selected_widgets):e.selected_widgets,widget_order:Array.isArray(e.widget_order)?JSON.stringify(e.widget_order):e.widget_order,settings:typeof e.settings=="string"?e.settings:JSON.stringify(e.settings||{})};console.log("Отправка данных профиля клиента:",t);const r=await fetch(`${this.baseUrl}/client-profile`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!r.ok){const n=await r.text();throw console.error("Ошибка создания профиля клиента:",n),new Error(`Ошибка создания профиля клиента: ${r.statusText}`)}const s=await r.json();return console.log("Профиль клиента создан с ID:",s.id),s.id}async getClientProfileByTelegramId(e){const t=await fetch(`${this.baseUrl}/client-profile/${e}`);if(t.status===404)return null;if(!t.ok)throw new Error(`Ошибка получения профиля клиента: ${t.statusText}`);const r=await t.json();if(r)try{r.selected_widgets=typeof r.selected_widgets=="string"?JSON.parse(r.selected_widgets||"[]"):Array.isArray(r.selected_widgets)?r.selected_widgets:[],r.widget_order=typeof r.widget_order=="string"?JSON.parse(r.widget_order||"[]"):Array.isArray(r.widget_order)?r.widget_order:[],r.settings=typeof r.settings=="string"?r.settings:JSON.stringify(r.settings||{})}catch(s){console.error("Ошибка парсинга данных профиля:",s),r.selected_widgets=[],r.widget_order=[],r.settings="{}"}return r}async updateClientProfile(e,t){const r={...t};r.selected_widgets&&(r.selected_widgets=Array.isArray(r.selected_widgets)?JSON.stringify(r.selected_widgets):r.selected_widgets),r.widget_order&&(r.widget_order=Array.isArray(r.widget_order)?JSON.stringify(r.widget_order):r.widget_order),r.settings&&typeof r.settings!="string"&&(r.settings=JSON.stringify(r.settings)),console.log("Отправка обновлений профиля клиента:",r);const s=await fetch(`${this.baseUrl}/client-profile/${e}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)});if(!s.ok){const n=await s.text();throw console.error("Ошибка обновления профиля клиента:",n),new Error(`Ошибка обновления профиля клиента: ${s.statusText}`)}console.log("Профиль клиента успешно обновлен")}async createUserResponse(e){const t=await fetch(`${this.baseUrl}/user-responses`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok)throw new Error(`Ошибка создания ответа пользователя: ${t.statusText}`);return(await t.json()).id}async getUserResponsesByTelegramId(e,t,r){let s=`${this.baseUrl}/user-responses/${e}`;const n=new URLSearchParams;t&&n.append("type",t),r&&n.append("limit",r.toString()),n.toString()&&(s+=`?${n.toString()}`);const i=await fetch(s);if(!i.ok)throw new Error(`Ошибка получения ответов пользователя: ${i.statusText}`);return await i.json()}async createEmotionEntry(e){const t=await fetch(`${this.baseUrl}/emotions`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok)throw new Error(`Ошибка создания эмоциональной записи: ${t.statusText}`);return(await t.json()).id}async getEmotionEntriesByTelegramId(e,t){let r=`${this.baseUrl}/emotions/user/${e}`;t&&(r+=`?limit=${t}`);const s=await fetch(r);if(!s.ok)throw new Error(`Ошибка получения эмоциональных записей: ${s.statusText}`);return await s.json()}async getEmotionEntryByDate(e,t,r){const s=await fetch(`${this.baseUrl}/emotions/user/${e}/date/${t}/${r}`);if(s.status===404)return null;if(!s.ok)throw new Error(`Ошибка получения эмоциональной записи: ${s.statusText}`);return await s.json()}async createJournalEntry(e){const t=await fetch(`${this.baseUrl}/journal`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok)throw new Error(`Ошибка создания журнальной записи: ${t.statusText}`);return(await t.json()).id}async getJournalEntriesByTelegramId(e,t){let r=`${this.baseUrl}/journal/user/${e}`;t&&(r+=`?limit=${t}`);const s=await fetch(r);if(!s.ok)throw new Error(`Ошибка получения журнальных записей: ${s.statusText}`);return await s.json()}async createAskezaEntry(e){const t=await fetch(`${this.baseUrl}/askeza`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok)throw new Error(`Ошибка создания аскезы: ${t.statusText}`);return(await t.json()).id}async getAskezaEntriesByTelegramId(e){const t=await fetch(`${this.baseUrl}/askeza/user/${e}`);if(!t.ok)throw new Error(`Ошибка получения аскез: ${t.statusText}`);return await t.json()}async getActiveAskezasForHome(e){const t=await fetch(`${this.baseUrl}/askeza/user/${e}/home`);if(!t.ok)throw new Error(`Ошибка получения аскез для главной: ${t.statusText}`);return await t.json()}async getCurrentAskeza(e){return(await this.getAskezaEntriesByTelegramId(e)).find(r=>r.is_active)||null}async updateAskezaEntry(e,t){const r=await fetch(`${this.baseUrl}/askeza/${e}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!r.ok)throw new Error(`Ошибка обновления аскезы: ${r.statusText}`)}async deleteAskezaEntry(e){const t=await fetch(`${this.baseUrl}/askeza/${e}`,{method:"DELETE"});if(!t.ok)throw new Error(`Ошибка удаления аскезы: ${t.statusText}`)}async clearAllData(){const e=await fetch(`${this.baseUrl}/clear`,{method:"DELETE"});if(!e.ok)throw new Error(`Ошибка очистки данных: ${e.statusText}`)}async exportData(){const e=await fetch(`${this.baseUrl}/export`);if(!e.ok)throw new Error(`Ошибка экспорта данных: ${e.statusText}`);return await e.blob()}async importData(e){const t=new FormData;t.append("database",e);const r=await fetch(`${this.baseUrl}/import`,{method:"POST",body:t});if(!r.ok)throw new Error(`Ошибка импорта данных: ${r.statusText}`)}async getDatabaseInfo(){const e=await fetch(`${this.baseUrl}/info`);if(!e.ok)throw new Error(`Ошибка получения информации о базе: ${e.statusText}`);return await e.json()}}const p=new g,h=()=>{var a,e,t,r;return(r=(t=(e=(a=window.Telegram)==null?void 0:a.WebApp)==null?void 0:e.initDataUnsafe)==null?void 0:t.user)!=null&&r.id?window.Telegram.WebApp.initDataUnsafe.user.id:123456789},b=()=>{var a,e,t;return(t=(e=(a=window.Telegram)==null?void 0:a.WebApp)==null?void 0:e.initDataUnsafe)!=null&&t.user?window.Telegram.WebApp.initDataUnsafe.user:{id:123456789,first_name:"Тестовый",last_name:"Пользователь",username:"testuser"}};function f({children:a,className:e="",onClick:t,variant:r="default"}){const n={default:{background:"rgba(255, 255, 255, 0.04)",border:"rgba(255, 255, 255, 0.1)",blur:"blur(20px) saturate(180%)",shadow:"0 8px 32px 0 rgba(0, 0, 0, 0.2), 0 0 20px rgba(6, 182, 212, 0.08), inset 0 1px 0 rgba(255, 255, 255, 0.15)"},elevated:{background:"rgba(255, 255, 255, 0.06)",border:"rgba(255, 255, 255, 0.12)",blur:"blur(25px) saturate(200%)",shadow:"0 12px 40px 0 rgba(0, 0, 0, 0.3), 0 0 30px rgba(6, 182, 212, 0.12), inset 0 1px 0 rgba(255, 255, 255, 0.2)"},subtle:{background:"rgba(255, 255, 255, 0.02)",border:"rgba(255, 255, 255, 0.08)",blur:"blur(15px) saturate(160%)",shadow:"0 4px 16px 0 rgba(0, 0, 0, 0.15), 0 0 10px rgba(6, 182, 212, 0.05), inset 0 1px 0 rgba(255, 255, 255, 0.1)"}}[r];return o.jsxs("div",{className:`relative backdrop-blur-xl rounded-3xl border transition-all duration-300 overflow-hidden group ${e}`,onClick:t,style:{background:n.background,border:`1px solid ${n.border}`,boxShadow:n.shadow,backdropFilter:n.blur,WebkitBackdropFilter:n.blur},children:[o.jsx("div",{className:"absolute inset-0 rounded-3xl pointer-events-none",style:{background:`
            linear-gradient(135deg, rgba(255, 255, 255, 0.12) 0%, transparent 50%, rgba(255, 255, 255, 0.04) 100%),
            radial-gradient(circle at 30% 20%, rgba(255, 255, 255, 0.15) 0%, transparent 50%),
            radial-gradient(circle at 70% 80%, rgba(6, 182, 212, 0.08) 0%, transparent 50%)
          `,backdropFilter:"blur(20px) contrast(120%) brightness(105%)",WebkitBackdropFilter:"blur(20px) contrast(120%) brightness(105%)"}}),o.jsx("div",{className:"absolute top-0 left-0 right-0 h-px bg-gradient-to-r from-transparent via-white/40 to-transparent pointer-events-none"}),o.jsx("div",{className:"relative z-10",children:a})]})}export{f as G,b as a,p as d,h as g};
//# sourceMappingURL=GlassCard-Drm0HRq5.js.map
