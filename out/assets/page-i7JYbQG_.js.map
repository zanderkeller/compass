{"version":3,"file":"page-i7JYbQG_.js","sources":["../../src/pages/emotions/page.tsx"],"sourcesContent":["\nimport { useState, useEffect } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport BottomNavigation from '../../components/feature/BottomNavigation';\nimport GlassCard from '../../components/base/GlassCard';\nimport EmotionChart from '../../components/feature/EmotionChart';\nimport NeonButton from '../../components/base/NeonButton';\nimport { dbManager, getTelegramUserId, type EmotionEntry } from '../../utils/database';\n\nexport default function Emotions() {\n  const navigate = useNavigate();\n  const [emotionHistory, setEmotionHistory] = useState<EmotionEntry[]>([]);\n  const [selectedFilter, setSelectedFilter] = useState<'all' | 'morning' | 'evening'>('all');\n  const [loading, setLoading] = useState(true);\n\n  const emotions = [\n    { key: 'joy', label: 'Радость', color: '#fbbf24', icon: 'ri-emotion-happy-line' },\n    { key: 'calm', label: 'Спокойствие', color: '#06b6d4', icon: 'ri-leaf-line' },\n    { key: 'energy', label: 'Энергия', color: '#f97316', icon: 'ri-flashlight-line' },\n    { key: 'love', label: 'Любовь', color: '#ec4899', icon: 'ri-heart-line' },\n    { key: 'confidence', label: 'Уверенность', color: '#8b5cf6', icon: 'ri-shield-check-line' },\n    { key: 'gratitude', label: 'Благодарность', color: '#10b981', icon: 'ri-hand-heart-line' },\n    { key: 'anxiety', label: 'Тревога', color: '#ef4444', icon: 'ri-alarm-warning-line' },\n    { key: 'sadness', label: 'Грусть', color: '#6b7280', icon: 'ri-emotion-sad-line' },\n    { key: 'anger', label: 'Гнев', color: '#dc2626', icon: 'ri-fire-line' },\n    { key: 'fear', label: 'Страх', color: '#7c3aed', icon: 'ri-ghost-line' }\n  ];\n\n  useEffect(() => {\n    loadEmotionHistory();\n  }, []);\n\n  const loadEmotionHistory = async () => {\n    try {\n      await dbManager.init();\n      const telegramId = getTelegramUserId();\n      const entries = await dbManager.getEmotionEntriesByTelegramId(telegramId);\n      setEmotionHistory(entries);\n    } catch (error) {\n      console.error('Ошибка загрузки истории эмоций:', error);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const filteredHistory = emotionHistory.filter(entry => \n    selectedFilter === 'all' || entry.type === selectedFilter\n  );\n\n  const formatDate = (timestamp: string) => {\n    const date = new Date(timestamp);\n    const today = new Date();\n    const yesterday = new Date(today);\n    yesterday.setDate(yesterday.getDate() - 1);\n\n    if (date.toDateString() === today.toDateString()) {\n      return 'Сегодня';\n    } else if (date.toDateString() === yesterday.toDateString()) {\n      return 'Вчера';\n    } else {\n      return date.toLocaleDateString('ru-RU', { \n        day: 'numeric', \n        month: 'long' \n      });\n    }\n  };\n\n  const formatTime = (timestamp: string) => {\n    return new Date(timestamp).toLocaleTimeString('ru-RU', { \n      hour: '2-digit', \n      minute: '2-digit' \n    });\n  };\n\n  const getEmotionConfig = (emotion: string) => {\n    return emotions.find(e => e.key === emotion) || emotions[0];\n  };\n\n  if (loading) {\n    return (\n      <div className=\"min-h-screen bg-gradient-to-br from-gray-900 via-black to-gray-800 flex items-center justify-center\">\n        <div className=\"text-center\">\n          <div className=\"w-16 h-16 border-4 border-cyan-400 border-t-transparent rounded-full animate-spin mx-auto mb-4\"></div>\n          <p className=\"text-white/70\">Загрузка эмоций...</p>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"min-h-screen bg-gradient-to-br from-gray-900 via-black to-gray-800 relative overflow-hidden\">\n      {/* Анимированный фон */}\n      <div className=\"absolute inset-0 opacity-20\">\n        <div className=\"absolute top-1/4 left-1/4 w-64 h-64 bg-cyan-400/10 rounded-full blur-3xl animate-pulse\"></div>\n        <div className=\"absolute bottom-1/4 right-1/4 w-96 h-96 bg-purple-500/10 rounded-full blur-3xl animate-pulse delay-1000\"></div>\n      </div>\n\n      <div className=\"relative z-10 pb-28\">\n        {/* Header */}\n        <div className=\"bg-black/40 backdrop-blur-sm border-b border-white/10 px-4 py-4 sticky top-0 z-20\">\n          <div className=\"flex items-center justify-between\">\n            <h1 className=\"text-xl font-semibold text-white\">Эмоции</h1>\n            <button \n              onClick={() => navigate('/')}\n              className=\"w-10 h-10 flex items-center justify-center rounded-full bg-white/10 hover:bg-white/20 transition-colors\"\n            >\n              <i className=\"ri-close-line text-xl text-white\"></i>\n            </button>\n          </div>\n        </div>\n\n        <div className=\"px-4 py-6 space-y-6\">\n          {/* График эмоций */}\n          <EmotionChart />\n\n          {/* Фильтры */}\n          <div className=\"flex space-x-2\">\n            {[\n              { key: 'all', label: 'Все', icon: 'ri-calendar-line' },\n              { key: 'morning', label: 'Утро', icon: 'ri-sun-line' },\n              { key: 'evening', label: 'Вечер', icon: 'ri-moon-line' }\n            ].map((filter) => (\n              <button\n                key={filter.key}\n                onClick={() => setSelectedFilter(filter.key as any)}\n                className={`flex items-center space-x-2 px-4 py-2 rounded-full text-sm transition-all duration-300 ${\n                  selectedFilter === filter.key\n                    ? 'bg-cyan-400 text-white shadow-lg'\n                    : 'bg-white/10 text-white/70 hover:bg-white/20'\n                }`}\n                style={{\n                  boxShadow: selectedFilter === filter.key ? '0 0 15px rgba(6, 182, 212, 0.4)' : 'none'\n                }}\n              >\n                <i className={filter.icon}></i>\n                <span>{filter.label}</span>\n              </button>\n            ))}\n          </div>\n\n          {/* История эмоций */}\n          {filteredHistory.length > 0 ? (\n            <div className=\"space-y-3\">\n              <h3 className=\"text-white text-lg font-semibold\">История записей</h3>\n              {filteredHistory.map((entry, index) => {\n                const emotionConfig = getEmotionConfig(entry.emotion);\n                return (\n                  <GlassCard key={index} className=\"p-4\">\n                    <div className=\"flex items-center justify-between\">\n                      <div className=\"flex items-center space-x-4\">\n                        <div \n                          className=\"w-12 h-12 flex items-center justify-center rounded-full\"\n                          style={{ \n                            backgroundColor: emotionConfig.color + '20',\n                            border: `2px solid ${emotionConfig.color}`,\n                            boxShadow: `0 0 15px ${emotionConfig.color}40`\n                          }}\n                        >\n                          <i className={`${emotionConfig.icon} text-xl`} style={{ color: emotionConfig.color }}></i>\n                        </div>\n                        <div>\n                          <h4 className=\"text-white font-semibold\">{emotionConfig.label}</h4>\n                          <div className=\"flex items-center space-x-2 text-sm text-white/60\">\n                            <span>{formatDate(entry.created_at)}</span>\n                            <span>•</span>\n                            <span>{formatTime(entry.created_at)}</span>\n                            <span>•</span>\n                            <div className=\"flex items-center space-x-1\">\n                              <i className={entry.type === 'morning' ? 'ri-sun-line' : 'ri-moon-line'}></i>\n                              <span>{entry.type === 'morning' ? 'Утро' : 'Вечер'}</span>\n                            </div>\n                          </div>\n                        </div>\n                      </div>\n                      <div className=\"text-right\">\n                        <div className=\"text-white font-bold text-lg\">{entry.level}/10</div>\n                        <div className=\"flex\">\n                          {Array.from({ length: 5 }, (_, i) => (\n                            <i \n                              key={i}\n                              className={`ri-star-${i < entry.level / 2 ? 'fill' : 'line'} text-sm`}\n                              style={{ color: emotionConfig.color }}\n                            ></i>\n                          ))}\n                        </div>\n                      </div>\n                    </div>\n                  </GlassCard>\n                );\n              })}\n            </div>\n          ) : (\n            <GlassCard className=\"p-8\">\n              <div className=\"text-center\">\n                <i className=\"ri-emotion-line text-white/40 text-4xl mb-4\"></i>\n                <h3 className=\"text-white text-lg font-semibold mb-2\">Нет записей</h3>\n                <p className=\"text-white/60 text-sm mb-6\">\n                  {selectedFilter === 'all' \n                    ? 'Начните делать ежедневные чек-ины, чтобы отслеживать свои эмоции'\n                    : `Нет записей за ${selectedFilter === 'morning' ? 'утро' : 'вечер'}`}\n                </p>\n                <div className=\"flex space-x-3 justify-center\">\n                  <NeonButton \n                    onClick={() => navigate('/checkin/morning')}\n                    className=\"flex-1 py-3 text-sm\"\n                  >\n                    <i className=\"ri-sun-line mr-2\"></i>\n                    Утренний чек-ин\n                  </NeonButton>\n                  <NeonButton \n                    onClick={() => navigate('/checkin/evening')}\n                    className=\"flex-1 py-3 text-sm\"\n                  >\n                    <i className=\"ri-moon-line mr-2\"></i>\n                    Вечерний чек-аут\n                  </NeonButton>\n                </div>\n              </div>\n            </GlassCard>\n          )}\n        </div>\n      </div>\n\n      <BottomNavigation />\n    </div>\n  );\n}\n"],"names":["Emotions","navigate","useNavigate","emotionHistory","setEmotionHistory","useState","selectedFilter","setSelectedFilter","loading","setLoading","emotions","useEffect","loadEmotionHistory","dbManager","telegramId","getTelegramUserId","entries","error","filteredHistory","entry","formatDate","timestamp","date","today","yesterday","formatTime","getEmotionConfig","emotion","e","jsxs","jsx","EmotionChart","filter","index","emotionConfig","GlassCard","_","i","NeonButton","BottomNavigation"],"mappings":"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"}