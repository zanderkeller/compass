import{u as _,r as t,j as e}from"./index-CQ0jGMfQ.js";import{G as a,d as f,g as S}from"./GlassCard-Drm0HRq5.js";import{N as D}from"./NeonButton-Cu2Y-Mkf.js";function L(){const i=_(),[r,o]=t.useState(null),[c,d]=t.useState(5),[x,m]=t.useState(5),[w,h]=t.useState(""),[y,b]=t.useState(""),[j,u]=t.useState(""),[N,v]=t.useState(!1),[C,k]=t.useState(!1),[E,g]=t.useState(!1),I=[{key:"joy",label:"Радость",color:"#fbbf24",icon:"ri-emotion-happy-line"},{key:"calm",label:"Спокойствие",color:"#06b6d4",icon:"ri-leaf-line"},{key:"energy",label:"Энергия",color:"#f97316",icon:"ri-flashlight-line"},{key:"love",label:"Любовь",color:"#ec4899",icon:"ri-heart-line"},{key:"confidence",label:"Уверенность",color:"#8b5cf6",icon:"ri-shield-check-line"},{key:"gratitude",label:"Благодарность",color:"#10b981",icon:"ri-hand-heart-line"},{key:"anxiety",label:"Тревога",color:"#ef4444",icon:"ri-alarm-warning-line"},{key:"sadness",label:"Грусть",color:"#6b7280",icon:"ri-emotion-sad-line"},{key:"anger",label:"Гнев",color:"#dc2626",icon:"ri-fire-line"},{key:"fear",label:"Страх",color:"#7c3aed",icon:"ri-ghost-line"}];t.useEffect(()=>{(async()=>{try{await f.init();const n=new Date().toISOString().split("T")[0],p=S(),s=await f.getEmotionEntryByDate(p,n,"morning");s?(o(s.emotion),d(s.level),m(s.sleep_quality||5),h(s.morning_mood||""),b(s.today_goals||""),u(s.intention||""),g(!0)):(o(null),d(5),m(5),h(""),b(""),u(""),g(!1)),k(!0)}catch(n){console.error("Ошибка инициализации:",n),k(!0)}})()},[]);const z=async()=>{if(r){v(!0);try{const l=new Date().toISOString().split("T")[0],p={telegram_id:S(),type:"morning",emotion:r,level:c,date:l,sleep_quality:x,morning_mood:w,today_goals:y,intention:j,created_at:new Date().toISOString()};await f.createEmotionEntry(p),i("/")}catch(l){console.error("Ошибка сохранения:",l)}finally{v(!1)}}};return C?e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-orange-900 via-yellow-900 to-pink-900 pb-20",children:[E&&e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:e.jsx(a,{className:"p-6 max-w-sm w-full",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-16 h-16 mx-auto mb-4 flex items-center justify-center rounded-full bg-yellow-500/20",children:e.jsx("i",{className:"ri-alarm-warning-line text-3xl text-yellow-400"})}),e.jsx("h3",{className:"text-xl font-semibold text-white mb-2",children:"Данные уже записаны"}),e.jsx("p",{className:"text-white/70 mb-6",children:"Вы уже делали утренний чек-ин сегодня. Хотите изменить данные?"}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsx("button",{onClick:()=>i("/"),className:"flex-1 px-4 py-2 bg-white/10 border border-white/20 rounded-lg text-white hover:bg-white/20 transition-colors",children:"Отмена"}),e.jsx("button",{onClick:()=>g(!1),className:"flex-1 px-4 py-2 bg-yellow-500 border border-yellow-400 rounded-lg text-white hover:bg-yellow-600 transition-colors",children:"Изменить"})]})]})})}),e.jsx("div",{className:"bg-black/20 backdrop-blur-sm border-b border-yellow-500/20 px-4 py-4 sticky top-0 z-10",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("button",{onClick:()=>i("/"),className:"w-10 h-10 flex items-center justify-center rounded-full bg-yellow-500/20 hover:bg-yellow-500/30 transition-colors backdrop-blur-sm",children:e.jsx("i",{className:"ri-arrow-left-line text-xl text-yellow-200"})}),e.jsx("h1",{className:"text-xl font-semibold text-yellow-100",children:"Утренний чек-ин"}),e.jsx("div",{className:"w-10"})]})}),e.jsxs("div",{className:"px-4 py-6 space-y-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("h2",{className:"text-2xl font-bold text-yellow-100 mb-2",children:"Доброе утро! ☀️"}),e.jsx("p",{className:"text-yellow-300",children:"Как вы себя чувствуете?"})]}),e.jsxs(a,{className:"p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"Ваше настроение сейчас"}),e.jsx("div",{className:"grid grid-cols-3 gap-3",children:I.map(l=>e.jsxs("button",{onClick:()=>o(l.key),className:`p-3 rounded-xl border-2 transition-all duration-200 ${r===l.key?"border-yellow-400 bg-yellow-500/20":"border-yellow-500/30 bg-black/20 hover:border-yellow-400/50"}`,children:[e.jsx("div",{className:"w-6 h-6 flex items-center justify-center mx-auto mb-2",children:e.jsx("i",{className:`${l.icon} text-xl`,style:{color:l.color}})}),e.jsx("div",{className:"text-xs font-medium text-yellow-200 leading-tight",children:l.label})]},l.key))})]}),e.jsxs(a,{className:"p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"Уровень интенсивности"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between text-sm text-white/60",children:[e.jsx("span",{children:"Низкий"}),e.jsx("span",{children:"Высокий"})]}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"range",min:"1",max:"10",value:c,onChange:l=>d(Number(l.target.value)),className:"w-full h-2 bg-white/20 rounded-lg appearance-none cursor-pointer slider"}),e.jsx("style",{children:`
                .slider::-webkit-slider-thumb {
                  appearance: none;
                  width: 20px;
                  height: 20px;
                  border-radius: 50%;
                  background: linear-gradient(45deg, #f59e0b, #ec4899);
                  cursor: pointer;
                  box-shadow: 0 2px 4px rgba(0,0,0,0.2);
                }
                .slider::-moz-range-thumb {
                  width: 20px;
                  height: 20px;
                  border-radius: 50%;
                  background: linear-gradient(45deg, #f59e0b, #ec4899);
                  cursor: pointer;
                  border: none;
                  box-shadow: 0 2px 4px rgba(0,0,0,0.2);
                }
              `})]}),e.jsx("div",{className:"text-center",children:e.jsxs("span",{className:"text-lg font-semibold text-yellow-400",children:[c,"/10"]})})]})]}),e.jsxs(a,{className:"p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"Качество сна"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between text-sm text-white/60",children:[e.jsx("span",{children:"Плохо"}),e.jsx("span",{children:"Отлично"})]}),e.jsx("div",{className:"relative",children:e.jsx("input",{type:"range",min:"1",max:"10",value:x,onChange:l=>m(Number(l.target.value)),className:"w-full h-2 bg-white/20 rounded-lg appearance-none cursor-pointer slider"})}),e.jsx("div",{className:"text-center",children:e.jsxs("span",{className:"text-lg font-semibold text-yellow-400",children:[x,"/10"]})})]})]}),e.jsxs(a,{className:"p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"Утреннее настроение"}),e.jsx("textarea",{value:w,onChange:l=>h(l.target.value),placeholder:"Как вы себя чувствуете этим утром? Что на душе?",className:"w-full h-24 p-3 border border-white/20 rounded-lg resize-none focus:outline-none focus:ring-2 focus:ring-yellow-500 focus:border-transparent bg-black/20 text-white placeholder-white/50"})]}),e.jsxs(a,{className:"p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"Цели на сегодня"}),e.jsx("textarea",{value:y,onChange:l=>b(l.target.value),placeholder:"Что вы планируете сделать сегодня?",className:"w-full h-24 p-3 border border-white/20 rounded-lg resize-none focus:outline-none focus:ring-2 focus:ring-yellow-500 focus:border-transparent bg-black/20 text-white placeholder-white/50"})]}),e.jsxs(a,{className:"p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"Намерение дня"}),e.jsx("textarea",{value:j,onChange:l=>u(l.target.value),placeholder:"С каким намерением вы проживете этот день?",className:"w-full h-24 p-3 border border-white/20 rounded-lg resize-none focus:outline-none focus:ring-2 focus:ring-yellow-500 focus:border-transparent bg-black/20 text-white placeholder-white/50"})]}),e.jsx(D,{onClick:z,disabled:!r||N,className:"w-full",children:N?e.jsxs("div",{className:"flex items-center justify-center",children:[e.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}),"Сохранение..."]}):e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"ri-check-line mr-2"}),"Сохранить чек-ин"]})})]})]}):e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-orange-900 via-yellow-900 to-pink-900 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-16 h-16 border-4 border-yellow-400 border-t-transparent rounded-full animate-spin mx-auto mb-4"}),e.jsx("p",{className:"text-yellow-200",children:"Загрузка..."})]})})}export{L as default};
//# sourceMappingURL=page-bW1JZF6w.js.map
